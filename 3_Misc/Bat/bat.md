# ECHO 和 @

ECHO 含义：（回显）回显命令信息

使用方法：

1. `ECHO [ON|OFF]`    打开|关闭回显（看不看得到命令信息的区别）
2. `ECHO 【信息内容】`    输出提示信息
3. `ECHO 文件内容>>文件名`    建立新文件

`@` 字符放在命令前将关闭该命令回显，无论此时echo是否为打开状态

`echo.` 代表回车

# REM 和 ::

`REM` 为注释命令，一般用来给程序加上注释，该命令后的内容不被执行，但能回显

`::` 也可以起到 rem 的注释作用，而且更简洁有效

**有效符号**：冒号后紧跟一个字母数字开头的字符串，`goto` 语句可以识别

**无效标号**：冒号后紧跟一个非字母数字的一个特殊符号，`goto` 无法识别的标号，可以起到注释作用，所以 :: 常被用作注释符号

与 rem 不同的是， :: 后的字符再执行时不会回显，无论是否用 echo on 打开命令行回显状态，因为命令解释器不认为它是一个有效的命令行


# PAUSE

暂停命令

在批处理命令中就是停止系统命令的执行并显示：请按下任意键继续…

- `Echo 提示语 & pause > nul`


# TITLE

设置批处理窗户的标题

格式：`title 【新窗口标题】`


# COLOR

设置批处理控制台 背景和字体颜色

命令格式：`color 【16 进制颜色格式】`

颜色属性由两个十六进制数字指定：第一个为背景，第二个则为前景（文字）。每个数字可以为以下任意值之一

0 = 黑色 | 1 = 蓝色 | 2 = 绿色 | 3 = 湖蓝色 | 4 = 红色
5 = 紫色 | 6 = 黄色 | 7 = 白色 | 8 = 灰色 | 9 = 淡蓝色
A = 淡绿色 | B = 浅淡绿色 | C = 淡红色 | D = 淡紫色
E = 淡黄色 | F = 亮白色

# Mode

设置窗口的大小

格式：`Mode con cols=（宽度） lines=（高度）`

# Goto

指定跳转到标签行，找到标签行后，程序将处理从下一行开始的命令

字母前必须加个`:`来表示这个字母是标签

`goto` 命令就是根据这个冒号来寻找下一步跳到哪一步命令


# Find

在文件中搜索字符串

格式：`find 【字符串】 【文件名】`


# Type

获取文件内容

格式：`type 【文件名】`


# START

启动应用程序


# CALL 调用程序

CALL 命令可以在批处理执行过程中调用另一个批处理，当另一个批处理执行完后，再继续执行原来的批处理

与Start有一点不同的是。Call 还能够调用标签行中的子程序


# % 变量引导符

引用变量用 `%var%`（var 是英文的变量的意思），调用程序外部参数用 %1 至 %9 等等

`%0` 至 `%9` 以及 `%*` 为命令行传递给批处理的参数：
- `%0` 批处理文件本身，包括完整的路径和扩展名。可以通过这一特殊的功能达到批处理本身循环的目的，也可以复制文件本身等等
- `%1` 第一个参数
- ……
- `%9` 第九个参数
- `%*` 从第一个参数开始的所有参数


# > 重定向符

输出重定向命令：这个字符的意思是传递并且**覆盖**，它所起的作用是将运行的结果传递到后面的范围


# >> 重定向符

这个符号所起的作用是传递并在文件的末尾**追加**内容


# | 命令管道符

格式：`第一条命令 | 第二条命令[|第三条命令|...]` 将第一条命令的结果作为第二条命令的参数来使用

例如：`dir C:\|find "txt"`（查找C:\中的所有，并发现 TXT 文本文档）


# ^ 转义字符

`^` 是对特殊符号<,>,&的前导符号，在命令中它将以上3个符号的特殊功能去掉，仅仅只把它们当成符号而不使用它们的特殊含义

另外，该转义字符还可以用作续行符号

```bat
echo hello^
world
```


# &、&&、|| 组合命令

`&`、`&&`、`||` 为组合命令，即可以把多个命令组合起来当一个命令来执行

`&`（AND）这个符号允许在一行中使用两个或以上不同的命令，当第一个命令执行失败了，也不影响后边的命令执行。执行顺序从前往后

`&&` 用这个符号可以按顺序执行多条命令，当碰到执行出错的命令后将不执行后面的命令，如果一直没有出错则一直执行完所有命令

`||` （或）这个符号允许在一行中使用两个或以上不同的命令，当碰到执行正确的命令时，将不执行后面的命令，如果没有出现正确的命令则一直执行完所有命令

**注意**：组合命令和重定向命令一起使用必须注意优先级：
管道命令的优先级高于重定向命令，重定向命令的优先级高于组合命令


# "" 字符串界定符

双引号允许在字符串中包含空格，进入一个特殊目录可以用如下方式：

- cd "Program files"
- cd progra~1
- cd pro*
以上的三种方法都可以进入 program files 这个目录


# , 逗号命令

逗号相当于空格，在某些情况下 `,` 可以用来当作空格使用


# ; 分号命令

当时命令相同时，可以将不同目标用`;`隔离开来，但执行效果不变，如在执行过程中发生错误，则只返回错误报告，但程序仍会继续执行

- dir c:\;d:\


# () 括号命令

括号中可以包括多行命令，这些命令将被看成一个整体，视为一条命令行

例如：
命令 - `echo1 & echo2 & echo3`

可以写成：
(
echo1
echo2
echo3
)

括号在 for语句 和 if语句 中常见，用来嵌套使用循环或条件语句


# FOR 命令语句

在批处理中，`for` 是最为强大的命令语句，它的出现，使得解析文本内容、遍历文件路径、数值递增、递减等操作更为简单
配合 `if`、`call`、`goto` 等流程控制语句，更是可以实现脚本复杂的自动化、智能化操作

例如：`For %%i in (你, 好) do @echo %%i`

for 语句的基本要素：
1. `for`、`in`、`do` 是 for 语句的关键字，它们三个缺一不可
2. `%%i` （在 cmd 命令中只有一个 %）是 `for` 语句中对定义变量的引用，就算它在 `do` 后的语句中没有参与语句的执行，也是必须出现的
3. `in` 之后，`do` 之前的括号不可省略
4. command1 表示字符串或变量，command2 表示字符串、变量或命令语句 `DO command1 [command2]`


# FOR/F 参数 命令语句

读取文件内容；提取几行字符；截取某个字符片段；对提取到的内容再切分、分割等等……`for /f` 就是被设计成专门用于解析文本的

示例：`for /f %%i in (1.txt) do echo %%i`

格式：
`for /f %%i in (文件名) do (...)`

`for /f %%i in ('命令语句') do (...)`

`for /f %%i in ("字符串") do (...)`


## 分割字符串：`delims=`

`for /f "delims=," %%i in (1.txt) do echo %%i`


## 定点提取：`tokens=`

`for /f "delims=, tokens=1,3" %%i %%j in (1.txt) do echo %%i` 依照 ',' 对 1.txt 中的内容进行分割，并取出其中的第一份与第三份


## 跳过文本内容（行）：`skip=`

`for /f "skip=2" %%i in (1/txt) do echo %%i` 跳过前两行文本内容


## 忽略指定字符的文本内容（文本首部）：`eol=`

`for /f "eol=," %%i in (1.txt) do echo %%i`

批处理eol本身可以忽略 `;` 开头的语句


## 增强型命令参数：`usebackq`

可以用于解决一些文件名中包含空格的问题

`for /f "usebackq" %%i in ("文件名") do (...)`

``for /f "usebackq" %%i in (`命令语句`) do (...)``

`for /f "usebackq" %%i in ('字符串') do (...)`


# 变量延迟 命令语句

在没有开启变量延迟的情况下，批处理命令行中的变量改变，必须要到下一条命令才能体现

`setlocal enabledelayedexpansion`

使用变量延迟，变量需要用一对感叹号 `!!` 括起来

`set a=123 & echo !a!`


# FOR 参数 R 命令语句

遍历文件夹，它会遍历指定目录和子目录下的所有文件和文件夹

列举出文件夹和文件里面的所有文件

`for /r 目录 %%i in (元素集合) do 命令语句集合`

`for /r C:\ %%i in (*) do echo %%i` 如果只想找到 exe 文件，可以写成 `(*.exe)`

# FOR 参数 D 命令语句

列举出当前目录中的文件夹

`for /d %%i in (C:\*) do echo %%i`


# FOR 参数 L 命令语句

计数循环

`for /l %%i in (x,y,z) do (...)`

在这个语句中，x、y 和 z 都只能取整数，正负皆可，x 代表起始值，y 代表增长，z 代表终止值，具体含义为：从 x 开始计数，以 y 为增长，直至最接近 z 的那个整数值为止，这之间有多少个数，do 后的语句就会执行多少次


# FOR 命令语句变量

~i   扩展 %i，删除 `""`
%~fi    将 %i 扩展到一个完全合格的路径名
%~di    仅将 %i 扩展到一个驱动器号
%~pi    仅将 %i 扩展到一个路径
%~ni    仅将 %i 扩展到一个文件名
%~xi    仅将 %i 扩展到一个文件扩展名
%~si    扩展的路径只含有短名
%~ai    将 %i 扩展到文件的文件属性
%~ti    将 %i 扩展到文件的日期/时间
%~zi    将 %i 扩展到文件的大小
%~$PATH:i 查找列在路径环境变量的目录，并将 %i 扩展


# SET 设置变量

```bat
set a=1
echo %a%
```

`:` 配合 set 使用可以用作选择字符

## SET/P 输入变量值

```bat
set /p 变量名称=请输入变量内容
echo 你输入的变量内容为：%变量名称%
```


## SET/A 数值计算

```bat
set /a 变量名称=30+3
echo 运算结果为：%变量名称%
```


## SET 字符串替换

`%内容:查找内容=替换内容%`



## SET 字符串截取

`%内容:~开始截取,截取位数%`


# IF ELSE 命令语句

条件判断

`not` 表非


比较运算符：
`EQU` - 等于
`NEQ` - 不等于
`LSS` - 小于
`LEQ` - 小于或等于
`GTR` - 大于
`GEQ` - 大于或等于

## 检测文件是否存在

EXIST filename 如果指定文件名存在，指定条件为 true

## 判断返回值

环境变量 errorlevel 的初始值为 0，当一些命令执行不成功，就会返回一个数值

`IF ERRORLEVEL 1 ECHO 文件拷贝失败`

具体其它数值的含义可查看环境变量 errorlevel

## IF /I 命令语句

字符串比较不区分大小写


# REN

修改文件名

格式：`REN 【文件所在路径】【旧文件名称】 【新文件名称】`
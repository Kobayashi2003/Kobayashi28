# 引用变量

复合类型 —— 引用变量

引用是一定义的变量的别名（另一个名称）
<!-- 例如将 twain 作为 clement 的引用，则可以交替使用 twain 和 clement 来表示该变量 -->

## 使用

引用变量的主要用途是用作函数的形参。
通过将引用变量用作参数，函数将使用原始数据，而不是其副本

## 引用变量的创建

```cpp
typeName A = testData;
typeName & B = A; // B is a reference of A
// 引用必须在其声明时进行初始化，之后其代表的变量将不能更替
```

## 将引用作为函数参数

按引用传递允许被调用的函数能够访问调用函数中的变量

应要注意，传递引用的限制将会更加严格
<!-- 例如用户在使用引用传参时不应将一个表达式作为参量，否则函数将会把一个系统创建的临时变量作为引用值 -->

## 临时变量、引用参数和const

如股票实参与引用参数不匹配，C++将会生成临时变量
<!-- 当前，仅当参数为 const引用时，C++才允许这么做 -->

如果引用参数是 const，则编译器将在下面两种情况下生成临时变量

1. 实参的类型正确，但不是左值
<!-- 左值参数只可以被引用的数据对象 -->
2. 实参的类型不正确，但可以转换为正确的类型

实际上，对于形参为 const引用的 C++ 函数，如果实参不匹配，则其行为类似于按值传递，为确保原始数据不被修改，将使用临时变量来存储值

注意：如果函数调用的参数不是左值或与相应的 const 引用参数的类型不匹配，则C++将创建类型正确的匿名变量，将函数调用的参数的值传递给该匿名变量，并让函数来引用该变量

## 应尽可能使用const

将引用参数声明为常量参数的引用的好处
1. 使用 const 可以避免无意中修改数据的编程错误
2. 使用 const 使函数能够处理 const 和 非 const 实参， 否则只能接受非 const 数据
3. 使用 const 引用使函数能够正确生成并使用临时变量

## 右值引用（C++11）

> typeName &&

右值引用主要用于库设计，可用来实现移动语义（move semantics）


## 将引用用于结构与类

<!-- 若不想让函数修改传入的结构，可以使用 const -->

## 返回引用

返回引用的函数实际上是返回被引用的变量的别名

函数返回引用应避免返回函数终止时不再存在的内存单元引用
<!-- 为避免这种问题，最简单的方法是返回一个作为参数传递给函数的引用。另一种方法是用 new 来分配新的存储空间 -->
# C++ 的输入和输出

[top]

**输入**指的是从输入文件将数据传送给程序
**输出**指的是从程序将数据传送到输出文件

对系统指定的标准设备的输入和输出 -> 标准I/O
以外存磁盘文件为对象进行输入和输出 -> 文件I/O
对内存中指定的空间进行输入和输出 -> 串I/O

## 标准输出流

1. **cout 流对象**
    - cout 是 console output 的缩写
    - cout 流在内存中对应开辟了一个缓冲区，用来存放流中的数据，当向cout流插入一个endl时，不论缓冲区是否已满，都立即输出流中的所有数据，然后插入一个换行符，并刷新流

    - cout 流对象的输出格式控制
        - cout.setf(ios::left) // 左对齐
        - cout.setf(ios::right) // 右对齐
        - cout.setf(ios::fixed) // 小数点后保留固定位数
        - cout.setf(ios::scientific) // 科学计数法
        - cout.precision(2) // 小数点后保留2位
        - cout.width(10) // 设置输出宽度为10
        - cout.fill('*') // 设置填充字符为*

    - cout 流对象的输出格式控制的另一种方法
        - cout << setw(10) << setfill('*') << left << fixed << setprecision(2) << 123.456 << endl; // 设置输出宽度为10，填充字符为*，左对齐，小数点后保留2位，输出123.46 （这些函数都在头文件iomanip中）

    - 流成员函数 put 输出单个字符(可为ASCII码)
        - cout.put('a') // 输出a
        - cout.put('a').put('b') // 输出ab

2. **cerr 流对象**
    - cerr 是 console error 的缩写
    - cerr 流对象与 cout 流对象类似，但是cerr流对象不会缓冲数据，而是立即输出数据

3. **clog 流对象**
    - clog 是 console log 的缩写
    - clog 流对象也是标准错误流对象，与cerr不同的是，clog中的信息存放在缓冲区中，当缓冲区满时或遇到endl时才输出

## 标准输入流

1. 用get函数从标准输入流中读取一个字符
    - 不带参数的get函数：cin.get() 用来从指定的输入流中提取一个字符，函数的返回值就是读入的字符。若遇到文件结束符或读入失败，则函数值返回**文件结束标志EOF(End Of File)**
    - 有一个参数的get函数：cin.get(ch) 从指定的输入流中读取一个字符，赋给ch。如果读取成功，函数返回非零值，否则返回0
    - 有三个参数的get函数：cin.get(ch, n, delim) 从指定的输入流中读取n-1个字符，赋给ch，遇到delim时停止读取，delim默认为换行符'\n'。如果读取成功，函数返回非零值，否则返回0

2. 用成员函数 getline函数读入一行字符
    - cin.getline(ch, n, delim) 从指定的输入流中读取n-1个字符，赋给ch，遇到delim时停止读取，delim默认为换行符'\n'。如果读取成功，函数返回非零值，否则返回0

3. eof函数
    - cin.eof() 用来判断是否到达文件尾，如果到达文件尾，返回true，否则返回false
  
4. peek函数
   - cin.peek() 用来查看下一个字符，但是不从输入流中提取该字符，函数的返回值为文件指针指向的字符，但它不会使文件指针后移。如果到达文件尾，返回EOF

5. putback函数
    - cin.putback(ch) 将字符ch放回到输入流中，使得下一次从输入流中读取字符时，先读取ch，然后再读取文件指针指向的字符

6. ignore函数
    - cin.ignore(n, delim) 从输入流中忽略n个字符，遇到delim时停止忽略，delim默认为换行符'\n'

## 对数据文件的操作与文件流

- 高级I/O功能是把若干个字节组合成一个有意义的单位，然后以ASCII字符形式输入和输出
- 低级I/O功能是把若干个字节直接输入和输出，不做任何处理

- 文件的打开和关闭
  - 文件的打开通过两种不同的方式实现
    - 调用文件流的成员函数open: ostream outfile; outfile.open(filename, mode)
    - 在定义文件流对象时指定参数： ostream outfile(filename, mode)
  - 文件的关闭
    - outfile.close() 关闭输出文件流

- ASCII文件的操作

- 二进制文件的操作
  - 二进制文件时将内存中数据存储形式不加转换地址传送到磁盘文件中，因此它又称为**内存数据的映像文件**。因为文件中的信息不是字符数据，而是字节中的二进制形式的信息，因此它有称为**字节文件**
  - 二进制文件在打开时要用ios::binary模式，如：ofstream outfile(filename, ios::binary)

## 字符串流

字符串流是一种特殊的流，它的输入和输出都是在内存中用户定义的字符数组（字符串）进行的，而不是在磁盘文件中进行的，因此它又称为**内存流**

字符串流也有缓冲区，开始时流缓冲区为空

在字符数组中可以存放字符，也可以存放整数、浮点数等数据

需要注意与文件流的区别：

- 输出时数据不是流向外存文件，而是流向内存中的的一个存储空间。输入时从内存中的存储空间读取数据
- 字符串流对象关联的不是文件，而是内存中的一个字符数组，因此不需要打开和关闭文件
- 字符串流所关联的字符数组中没有相应的结束标志，用户要指定一个特殊字符作为结束符
#### P32 考虑在图 5-30 中具有等级拓扑的数据中心网络。假设现在有 80 对流，在第 1 和第 9 机架之间有 10 个流，在第 2 和第 10 机架间有 10 个流，等等。进一步假设网络中所有链路是 10 Gbps，而主机和 TOR 交换机之间的链路是  1 Gbps。
#### a. 每条流具有相同的数据率；；确定一条流的最大速率。
#### b. 对于相同的流量模式，对于图 5-31 中高度互联的拓扑，确定一条流的最大速率。
#### c. 现在假设有类似的流量模式，但在每个机架上涉及 20 台主机和 160 对流。确定对这两个拓扑的最大流速率。

![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/05%20链路层/images/p32.png)
![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/05%20链路层/images/p32.1.png)

  * a.
    * 10 Gbps / 80 = 0.125 x 10^9 Gbps = 125 Mbps

  * b.
    * ![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/05%20链路层/images/p32.2.png)
    * 从上图可以看出，一条流的最大速率是 1 Gbps。

  * c.
    * 对于第一种拓扑，10 Gbps / 160 = 62.5 Mbps
    * 对于第二中拓扑，10 Gbps / 20 = 500 Mbps

#### P33 考虑图 5-30 中所示的等级网络，并假设该数据中心需要在其他应用程序之间支持电子邮件和视频分发。假定 4 个服务器机架预留于电子邮件，4 个服务器机架预留于视频。对于每个应用，所有 4 个机架必须位于某单一二层交换机之下，因为二层到一层链路没有充足的带宽来支持应用内部的流量。对于电子邮件应用，假定 99.9% 时间仅使用 3 个机架，并且视频应用具有相同的使用模式。
#### a. 电子邮件应用需要使用第 4 个机架的时间比例有多大？视频应用需要使用第 4 个机架的时间比例有多大？
#### b. 假设电子邮件使用和视频使用是独立的，这两个应用需要其第 4 个机架的时间比例有多大（等价地，概率有多大）？
#### c. 假设对于一个应用来说，占用服务器 0.001% 或更少时间的这种临时性短缺是可以接受的（导致用户在极短时间内体验到差劲的性能）。讨论在图 5-31 中的拓扑能够怎样使用，使得仅 7 个机架被共同地分配给两个应用（假设拓扑能够给支持所有流量）。 

![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/05%20链路层/images/p33.png)
![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/05%20链路层/images/p33.1.png)

  * a.
    * 电子邮件使用第 4 个机架的比例和视频应用使用第 4 个机架的时间比例相同，都是 0.1 %

  * b.
    * 都需要使用第 4 个机架的时间比例为 0.00001%

  * c.
    * 因为同时使用到第 4 个机架的几率为 0.00001%，这少于 0.001%，所以用 3 台机架用于电子邮件应用，3 台用于视频应用，第 4 台即用于电子邮件，也用于视频应用。
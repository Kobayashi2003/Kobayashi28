#### P8 在 5.3 节中，我们提供了时隙 ALOHA 效率推到的概要。在本习题中，我们将完成这个推导。
#### a. 前面讲过，当有 N 个活跃节点时，时隙 ALOHA 的效率 是 Np(1-p)^N-1。求出使这个表达式最大化的 p 值。
#### b. 使用在 (a) 中求出的 p值，令 N 接近于无穷，求出时隙 ALOHA 的效率。（提示：当 N 接近于无穷时，(1-1/N)^N 接近于 1/e）
   
   * a.
     * 求导，然后令导函数 = 0，再解出此时的 p 值。
     * ![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/05%20链路层/images/p8.1.png)
     
   * b.
     * ![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/05%20链路层/images/p8.2.png)
     
#### P9 说明纯 ALOHA 的最大效率是 1/(2e)

  * ![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/05%20链路层/images/p9.png)

#### P10 考虑两个结点 A 和 B，它们都使用时隙 ALOHA 协议来竞争一个信道。假定结点 A 比结点 B 有更多数据要传输，并且结点 A 的重传概率 Pa 比结点 B 的重传概率 Pb 要大。
#### a. 给出结点 A 的平均吞吐量公示。具有这两个结点的协议的总体效率是多少？
#### b. 如果 Pa = 2Pb，结点 A 的平均吞吐量比结点 B 的要大两倍吗？为什么？如果不是，你能够选择什么样的 Pa 和 Pb 使其成立？
#### c. 一般而言，假设有 N 个结点，其中的结点 A 具有重传概率 2p 并且所有其他结点具有重传概率 p。给出表达式来计算结点 A 和其他任何结点的平均吞吐量。

  * a.
    * A 的平均吞吐量公式为 : `Pa(1 - Pb)`
    * 总体效率为 : `Pa(1 - Pb) + Pb(1 - Pa)`
    
  * b.
    * 若 `Pa = 2Pb` 则 A 结点吞吐量为 `2Pb(1 - Pb)` B 结点吞吐量为 `Pb(1 - 2Pb)`，不是 2 倍关系
    * 令 `A = 2B` 得到 Pa 和 Pb 关系为 `Pa = 2Pb/(1 + Pb)`

  * c.
    * A 的平均吞吐量为 : `2p(1 - p)^(N-1)` A 成功并且其他 N - 1 个结点都失败。
    * 其他任何结点的平均吞吐量为 : `p(1 - 2p)(1 - p)^(N-2)` 自己这个结点成功，其他 N - 2 个结点失败，并且 A 结点也失败。

#### P11 假定 4 个活跃节点 A、B、C 和 D 都使用时隙 ALOHA 来竞争访问某信道。假设每个结点有无限个分组要发送。每个结点在每个时隙中以概率 p 尝试传输。第一个时隙编号为时隙 1，第二个时隙编号为时隙 2，等等。
#### a. 结点 A 在时隙 5 中首次成功的概率是多少？
#### b. 某个结点（A、B、C 或 D）在时隙 4 中成功的概率是多少？
#### c. 在时隙 3 中出现首个成功的概率是多少？
#### d. 这个 4 结点系统的效率是多少？

  * a.
    * 设事件 N 为结点 A 在时隙 5 中首次成功传输帧，则 
    * `P(N) = P(A)(1 - P(A))^4`
    * 设事件 A 为 `A 在时隙中成功传输帧`
    * `P(A) = P(A 传输 && B 不传输 && C 不传输 && D 不传输)`
    * `P(A) = p(1 - p)^3`
    * 因此 `P(N) = p(1 - p)^3[1 - p(1 - p)^3]^4`

  * b.
    * 设事件 B 为任意结点在某个时隙中成功传输帧，则 
    * `P(B) = p(1 - p)^3`
    * 设事件 C 为某个结点在某个时隙中成功传输帧，则
    * `P(C) = 4p(1 - p)^3`
   
  * c.
    * 设事件 D 为在时隙 3 中出现首次成功传输帧，则
    * `P(D) = P(C)(1 - P(C))^2`
    * `P(D) = 4p(1 - p)^3[1 - 4p(1 - p)^3]^2`
    
  * d.
    * 只要在时隙中有一个结点成功传输，这个时隙就算没有浪费，所以该 4 结点系统的效率为 `P(C) = 4p(1 - p)^3`

#### P12 对 N 的下列值，画出以 p 为函数的时隙 ALOHA 和纯 ALOHA 的效率
#### a. N = 15
#### b. N = 25
#### c. N = 35

  * 时隙 ALOHA 的效率为 `f(p) = Np(1 - p)^(N-1)`
  * 纯 ALOHA 的效率为 `g(p) = Np(1 - p)^2(N-1)`
  
  * a.
    * 当 N = 15 时
    * `f(p) = 15p(1 - p)^14`
    * `g(p) = 15p(1 - p)^28`
    * ![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/05%20链路层/images/p12.1.png)

  * b.
    * 当 N = 25 时
    * `f(p) = 25p(1 - p)^24`
    * `g(p) = 25p(1 - p)^48`
    * ![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/05%20链路层/images/p12.2.png)

 * c.
   * 当 N = 35 时
   * `f(p) = 35p(1 - p)^34`
   * `g(p) = 35p(1 - p)^68`
   * ![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/05%20链路层/images/p12.3.png)

#### P13 考虑具有 N 个结点和传输速率为 R bps 的一个广播信道。假设该广播信道使用轮询进行多路访问（有一个附加的轮询结点）。假设从某结点完成传输到后续结点允许传输之间的时间量（即轮询时延）是 `d_poll`。假设在一个轮询周期中，一个给定的结点允许至多传输 Q 比特。该广播信道的最大吞吐量是多少？

  * 该轮询多路访问协议可能按照如下模式工作：
  * 主结点询问给定结点: 
  * “你要是有要发送的数据，你最多发 Q 比特，发完告诉我。如果没数据要发，立马告诉我”。
  * 于是从上一个结点发送完成，将完成信号传递给主结点，到主结点给下一结点的命令传达到位为止，所经历的时延是 `d_poll`。因此，对于每个结点来说，都引入了一个 `d_poll`。
  * 因此若有 N 个结点，则轮询一遍所有结点，假如都有数据要发送，则总耗时为 `N(Q/R + d_poll)`
  * 总发送的数据量为 `NQ`，因此总吞吐量为总发送数据量除以总耗时如下：
  * `NQ/N(Q/R + d_poll)`
  * `Q/(Q/R + d_poll)`



  
   
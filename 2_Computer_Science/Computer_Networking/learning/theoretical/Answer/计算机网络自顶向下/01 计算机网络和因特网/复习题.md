#### R1 "主机" 和 "端系统" 之间有什么不同？列举几种不同类型的端系统。Web 服务器是一种端系统吗？

> 主机 (host) 和端系统 (end system) 是一回事，在书中根据语境上下文交替使用，"端系统" 侧重于强调它在整个网络中所处的位置；"主机" 侧重于强调在它之上运行了各种纷繁丰富的应用程序。
> 
> Web 服务器是一种端系统，它存储网站的 html 文件以及构成网站的各种图像和音视频资源，用来应答其他端系统（比如手机、笔记本电脑）索取相应资源的请求。

#### R2 "协议" 一词常被用来描述外交关系。维基百科是怎样描述外交协议的？

> Diplomatic protocol is commonly described as a set of international courtesy rules. These well-established and time-honored rules have made it easier for nations and people to live and work together. Part of protocol has always been the acknowledgment of the hierarchical standing of all present. Protocol rules are based on the principles of civility.
> 
> 外交协议通常用来描述一些国际间的礼节，这些历史悠久并得以传承的礼节使不同国家间的人们能更好的共同生活和工作，一些协议已经成为社会各阶层身份的象征，协议的规则建立在端庄得体的原则上。

#### R3 标准对于协议为什么重要？

> 好比两个人交谈工作内容：A 说粤语而 B 说四川方言，那将导致互相误解而使工作无法推进下去，如果两个人都遵守只用普通话交谈工作内容这一标准，那么沟通交流的顺畅便得以保证。

#### R4 列出 6 种接入技术。将它们分类为住宅接入、公司接入或广域无线接入。

>* 家庭接入：DSL、电缆电线接入、光纤到户、卫星
>* 公司接入：以太网接入
>* 广域无线网接入：3G

>DSL 接入：
![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/01%20计算机网络和因特网/images/r4.1.png)

>电缆电线接入
![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/01%20计算机网络和因特网/images/r4.2.png)

>光纤到户
![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/01%20计算机网络和因特网/images/r4.3.png)

>卫星
![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/01%20计算机网络和因特网/images/r4.4.png)

>以太网接入
![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/01%20计算机网络和因特网/images/r4.5.png)

>3G
![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/01%20计算机网络和因特网/images/r4.6.png)

#### R5 HFC 带宽是专用的，还是用户间共享的？在下行 HFC 信道中，有可能发生碰撞吗？为什么？

> HFC 带宽是共享的，如果多个用户在同一时间使用 HFC 带宽，那么他们每个人分到的带宽就会低于总带宽。上行信道中，每个用户发送的分组发往电缆头端；下行信道中，电缆头端将每个分组发往各个用户，因为无论是上行信道还是下行信道，分组的方向都是单向的，因此不会出现碰撞。

#### R6 列出你所在城市中的可供使用的住宅接入技术。对于每种类型的接入方式，给出所宣称的下行速率、上行速率和每月价格。

> 电信宽带光纤到户，100M 下行，上行运营商没有提供，估计有仅有 4M 带宽。费用年费一两千左右。 

#### R7 以太 LAN 的传输速率是多少？

> 以太网是 LAN （Local Area Network） 即局域网最常见的组网方式（也就是说除了以太网还有其他的局域网组网方式，比如令牌环和 FDDI）。以太网接入采用以太网交换机来连接众多的端系统，通信链路的材质是双绞铜线，个人电脑的传输速率能达到 10 Mbps，而服务器的传输速率能达到 10 Gbps （传输速率和双绞铜线的长度，粗细有关，服务器用得更粗？个人电脑用得更细？）。 

#### R8 能够运行以太网的一些物理媒介是什么？

> 以太网交换机、双绞铜线（常见），光纤（支持更高的速度）。

#### R9 拨号调制解调器、HFC、DSL 和 FTTH 都用于住宅接入。对于这些技术中的每一种，给出传输速率的范围，并讨论有关带宽是共享的还是专用的。

> 拨号调制解调器：56 kbps；带宽专用
> 
> ADSL：2.5 Mbps 上行； 24 Mbps 下行 带宽共享
> 
> HFC：30.7 Mbps 上行； 42.8 Mbps 下行 带宽共享
> 
> FTTH：2-10 Mbps 上行；10-20 Mbps 下行 带宽专用 （时过境迁，现在已经可以支持更高的速率了）

#### R10 描述今天最流行的无线因特网接入技术。对它们进行比较和对照。

> Wi-Fi 局域无线网，接入设备通过 Wi-Fi 接入点并在其半径数十米范围内进行分组的收发。路由器一般结合了调制解调器和 Wi-Fi 接入点的功能。
> 
> 3G/4G 广域无线网，分组通过电话供应商提供的基础设施-蜂窝基站来完成收发，接入设备可以位于蜂窝基站半径为数十公里的范围内。

#### R11 假定在发送主机和接受主机间只有一台分组交换剂。发送主机和交换机间以及交换机和接受主机间的传输速率分别是 R1 和 R2。假设该交换机使用存储转发分组交换方式，发送一个长度为 L 的分组的端到端总时延是什么？（忽略排队时延、传播时延和处理时延）

> L/R1 + L/R2

#### R12 与分组交换网络相比，电路交换网络有哪些优点？在电路交换网络中，TDM 比 FDM 有哪些优点？

> 电路交换为分组的收发预留了资源，比如固定的带宽。相比于分组交换中分组在到达某个路由器时可能会因为路由器忙于其他分组的发送而排队（排队延时），电路交换则为分组预留恒定的传输速率，因此分组不需要排队。对于传送大文件，电路交换网络的所需时间是明确的（因为通信链路具有恒定的传输速率）。对于传送语音视频信息，电路交换网络具有低延时特点（因为不会被其他分组干扰造成排队）。
> 
> FDM 需要更加复杂的硬件设备，以便于将信号划分到适当的频段。

#### R13 假定用户共享一条 2 Mbps 链路。同时假定当每个用户传输时连续以 1 Mbps 传输，但每个用户仅传输 20% 时间。
##### a. 当使用电路交换时，能够支持多少用户？
##### b. 作为该题的遗留问题，假定使用分组交换。为什么如果两个或更少的用户同时传输的话，在链路前面基本没有排队延时？为什么如果 3 个用户同时传输的话，将有排队时延？
##### c. 求出某指定用户正在传输的概率。
##### d. 假定现在有 3 个用户。求出在任何给定的时间，所有三个用户在同时传输的概率。求出队列增长的时间比率。

> a.
> 
> 2 Mbps / 1 Mbps = 2 个用户
> 
> b.
> 
> 设到达分组交换机的分组速率为 L (bit/s)，传输速率为 R (bit/s)，那么使用分组交换时，两个或更少用户同时传输时，L/R <= 1，即单位时间内 T 内到达交换机的所有分组能在少于 T 的时间内全部推上链路，所以没有排队延时。（实际生活中，并不能期望用户以恒定速率发送分组，还要考虑突发性质的分组，因此可能会带来一些传输时延，但流量强度小于等于 1，因此排队不会无界增长，但结合考虑输出缓存的容量限制，丢包仍然可能出现）。如果 3 个用户同时传输，流量强度将大于 1，因此一定会出现排队延时，假如3个用户均以恒定 1 Mbps 速率发包，那么队列将无界增加
> 
> c.
> 
> 仅传输 20% 的时间，1s 内有 0.2s 在传输，因此正在传输的概率为 0.2
> 
> d.
> 
> C(3,3)(0.2)^3 = 0.008，只有三个用户同时传输时队列长度才会增加，所以队列增长的时间比率是 0.008

#### R14 为什么在等级结构相同级别的两个 ISP 通常相互对等？某 IXP 是如何挣钱的？

>只要级别相同的两个 ISP 对等，就可以减少因为需要联通上层 ISP 而支付的费用，如果不需要互联只有经过上层 ISP 才能达到的端系统，那么就可以少经过几个路由，并且 ISP 也节约了成本。IXP 是一个让不同 ISP 对等和连接的汇聚点，它根据转发的数据量来进行收费。

#### R15 某些内容提供商构建了自己的网络。描述谷歌的网络。内容提供商构建这些网络的动机是什么？

> 谷歌直接与较低层 ISP 对等，或者在 IXP 处与它们连接，谷歌也与第一层 ISP 连接，因为很多接入 ISP 直接与第一层 ISP 相连，而谷歌就与它们交换的流量向这些 ISP  付费。通过创建自己的网络，内容提供商不仅减少了向顶层 ISP 支付费用，而且对其服务最终如何交付给端用户有了更多的控制。

#### R16 考虑从某源主机跨越一条固定路由向某目的主机发送一分组。列出端到端时延中的时延组成成分。这些时延中的哪些是固定的，哪些是变化的？

> ![](https://github.com/YangXiaoHei/Networking/blob/master/计算机网络自顶向下/01%20计算机网络和因特网/images/r16.png)
> 
> 其中源主机和各个路由器的处理延时、传输时延、传播时延是固定的。
> 排队时延是变化的。

#### R17 访问在配套 Web 网站上有关传输时延与传播时延 Java 小程序。在可用速率、传播时延和可用的分组长度之中找出一种组合，使得该分组的第一个比特到达接收方之前发送方结束了传输。找出另一种组合，使得发送方完成传输之前，该分组的第一个比特到达了接收方。

> [Transmission versus Propagation Delay](https://media.pearsoncmg.com/aw/ecs_kurose_compnetwork_7/cw/content/interactiveanimations/transmission-vs-propogation-delay/transmission-propagation-delay-ch1/index.html )
> 
> 10 km, 100 Mbps, 100 Bytes
>
> 10 km, 512 kbps, 100 Bytes

#### R18 一个长度为 1000 字节的分组经距离为 2500 km 的链路传播，传播速率为 2.5 x 10^8 m/s 并且传输速率为 2 Mbps，它需要用多长时间？更为一般地，一个长度为 L 的分组经距离为 d 的链路传播，传播速度为 s 并且传输速率为 R bps，它需要用多长时间？该时延与传输速率相关吗？

> ~~需要的时间为传播延时 + 传输延时：T = 10^3 / (2 * 10^6) + 2.5 * 10^6 / 2.5 * 10^8 = 10.5ms~~
> 
> ~~T = d/s + L/R, 该时延与传输速率有关，并且很大程度上受传输速率的制约~~
> 
> T = 2.5 * 10^6 / 2.5 * 10^8 = 10 ms
> 
> T = d/s
> 
> 该时延与传输速率无关，因为题目假设分组已经被推上了通信链路

#### R19 假定主机 A 要向主机 B 发送一个大文件。从主机 A 到主机 B 的路径上有 3 段链路，其速率分别为 R1 = 500 kbps, R2 = 2 Mbps, R3 = 1 Mbps。

#### a. 假定该网络中没有其他流量，该文件传送的吞吐量是多少？
#### b. 假定该文件大小为 4 MB。传输该文件到主机 B 大致需要多长时间？
#### c. 重复 (a) 和 (b)，只是这时 R2 减小到 100 kbps。

> a.
> 
> 吞吐量为 min{R1, R2, R3} = 500 kbps
> 
> b.
> 
> 总传输时间为 T = F / min{R1, R2, R3} = 4 * 10^6 / 5 * 10^5 = 8 s
> 
> c.
> 
> 吞吐量为 100 kbps
> 总传输时间为 T = F / min{R1, R2, R3} = 4 * 10^6 / 10^5 = 40 s

#### R20 假定端系统 A 要向端系统 B 发送一个大文件。在一个非常高的层次上，描述端系统怎样从该文件生成分组。当这些分组之一到达某分组交换机时，该交换机使用分组中的什么信息来决定将该分组转发到哪一条链路上？因特网中的分组交换为什额可以与驱车从一个城市到另一个城市并沿途询问方向相类比？

> A 将大文件切割成报文，在每个报文附上头部信息，网络层会在报文头部附着目标 B 的 IP 地址，然后路由器使用分组中的 IP 地址（因为路由器实现了底部三层协议栈，包括网络层）来决定将分组导向哪一条通信链路。因为驱车问路的方式和分组到达路由器询问下一目的的方式本质上是相同的。

#### R21 访问配套 Web 站点的排队和丢包 Java 小程序。最大发送速率和最小的传输速率是多少？对于这些速率，流量强度是多少？用这些速率运行该 Java 小程序并确定出现丢包要花费多长时间？然后第二次重复该实验，再次确定出现丢包花费多长时间。这些值有什么不同？为什么会有这种现象？

> [Queuing and Loss Interactive Animation](https://media.pearsoncmg.com/aw/ecs_kurose_compnetwork_7/cw/content/interactiveanimations/queuing-loss-applet/index.html)
> 
> 最大发送速率是 500 packets/s，最小传输速率是 350 packets/s
> 
> 流量强度是： 发送速率/传输速率。即 1.43
> 
> 在第 10.1 ms 时出现丢包
> 
> 在第 9.2 ms 时出现丢包
> 
> 出现丢包需要花费的时间是不同的，因为发送速率是不均匀的，比如现在在 1s 内发了 500 个包，但可能是 0 ~ 100 ms 发了 499 个，101 ~ 999 ms 发了 1 个，也可能是 0 ~ 100 ms 发了 250 个，101 ~ 999 ms 发了 250 个。

#### R22 列出一个层次能够执行的 5 个任务。这些任务中的一个（或两个）可能由两个（或更多）层次执行吗？

> 这题啥意思？？？

#### R23 因特网协议栈中的 5 个层次有哪些？在这些层次中，每层的主要任务是什么？

> 应用层、传输层、网络层、链路层、物理层。
> 
> 应用层是应用程序协议存留的地方
> 
> 运输层在应用程序端点之间传送应用层报文
> 
> 网络层将分组从一个主机移动到另一个主机
> 
> 链路层将分组从一个节点移动到路径上的下一个节点
> 
> 物理层将帧中的一个一个比特从一个节点移动到下一个节点

#### R24 什么是应用层报文？什么是运输层报文段？什么事网络层数据报？什么事链路层帧？

> 应用层报文是对端主机应用程序期望收到的内容，运输层报文段是在应用层报文头部附着了一个应用层包头，网络层数据报是在运输层报文段头部附着了一个网络层包头，链路层帧是在网络层数据报头部附着了一个链路层包头。

#### R25 路由器处理因特网协议栈中的哪些层次？链路层交换机处理的是哪些层次？主机处理的是哪些层次？

> 路由器实现了协议栈中的底部三层协议，包括物理层，链路层，网络层。因为路由器需要根据 IP 地址将分组导向不同的链路。链路层交换机处理的是底部两层协议，包括物理层、链路层，因此链路层交换机是接入网设备，与最后一台边缘路由器以及端系统直连。主机处理协议栈中所有层次。

#### R26 病毒和蠕虫之间有什么不同？

> 病毒是一种需要某种形式的用户交互来感染用户设备的恶意软件。
> 
> 蠕虫是一种无需任何明显用户交互就能进入设备的恶意软件。

#### R27 描述如何产生一个僵尸网络，以及僵尸网络是怎样被用于 DDoS 攻击的。

>  攻击者通过寻找应用程序的漏洞，比如缓冲区溢出漏洞来让主机执行控制程序，攻击者扫描一系列有漏洞的主机并将它们均利用起来，命令所有受控制节点发送分组给一个目标主机，这就导致目标主机的接入路由器输出缓存充满而丢弃所有正常请求的分组。

#### R28  假定 Alice 和 Bob 经过计算机网络互相发送分组。假定 Trudy 将自己安置在网络中，使得她能够俘获由 Alice 发送的所有分组，并发送她希望给 Bob 的东西；她也能俘获由 Bob 发送的所有分组，并发送她希望给 Alice 的东西。列出这种情况下 Trudy 能够做的某些恶意的事情。

>  因为她双方的分组都能俘获，所以能看到不该看的辣眼睛的隐私信息，比如其实 Alice 和 Bob 是炮友，或者他们在走私毒品，然后抓住了把柄借机勒索。













-- 1. 创建数据库表`CUSTOMERS(CID, CNAME, CITY,  DISCNT)`，数据库表`AGENTS(AID, ANAME, CITY, PERCENT)`，数据库表`PRODUCTS(PID, PNAME)`。其中`CID`，`AID`，`PID`分别是各表的主键，具有唯一性约束。
-- 2. 创建数据库表`ORDERS(ORDNA, MONTH, CID, AID, PID, QTY, DOLLARS)`。其中，`ORDNA`是主键，具有唯一性约束。`CID`，`AID`，`PID`是外键，分别参照的是表`CUSTOMERS`的`CID`字段，表`AGENTS`的`AID`字段，表`PRODUCTS`的`PID`字段。
-- 3. 增加数据库表`PRODUCTS`的三个属性列：`CITY`，`QUANTITY`，`PRICE`。
-- 4. 为以上4个表建立各自的按主键增序排列的索引。
-- 5. 取消步骤4建立的4个索引。

DROP TABLE IF EXISTS ORDERS;
DROP TABLE IF EXISTS PRODUCTS;
DROP TABLE IF EXISTS CUSTOMERS;
DROP TABLE IF EXISTS AGENTS;

CREATE TABLE CUSTOMERS (
    CID     INT PRIMARY KEY,
    CNAME   VARCHAR(50),
    CITY    VARCHAR(50),
    DISCNT  DECIMAL(5,2)
);

CREATE TABLE AGENTS (
    AID     INT PRIMARY KEY,
    ANAME   VARCHAR(50),
    CITY    VARCHAR(50),
    PERCENT DECIMAL(5,2)
);

CREATE TABLE PRODUCTS (
    PID     INT PRIMARY KEY,
    PNAME   VARCHAR(50)
);

CREATE TABLE ORDERS (
    ORDNA   INT PRIMARY KEY,
    MONTH   VARCHAR(50),
    CID     INT,
    AID     INT,
    PID     INT,
    QTY     INT,
    DOLLARS DECIMAL(10,2),
    FOREIGN KEY (CID) REFERENCES CUSTOMERS(CID),
    FOREIGN KEY (AID) REFERENCES AGENTS(AID),
    FOREIGN KEY (PID) REFERENCES PRODUCTS(PID)
);

ALTER TABLE PRODUCTS ADD COLUMN CITY VARCHAR(50);
ALTER TABLE PRODUCTS ADD COLUMN QUANTITY INT;
ALTER TABLE PRODUCTS ADD COLUMN PRICE DECIMAL(10,2);

CREATE INDEX idx_products_pid_asc ON PRODUCTS (PID ASC);
CREATE INDEX idx_customers_cid_asc ON CUSTOMERS (CID ASC);
CREATE INDEX idx_agents_aid_asc ON AGENTS (AID ASC);
CREATE INDEX idx_orders_ordna_asc ON ORDERS (ORDNA ASC);

DROP INDEX idx_products_pid_asc;
DROP INDEX idx_customers_cid_asc;
DROP INDEX idx_agents_aid_asc;
DROP INDEX idx_orders_ordna_asc;

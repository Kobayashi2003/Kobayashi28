# 实验七 视图

## 实验目的

熟悉SQL语言支持的有关视图的操作，能够熟练使用SQL语句来创建需要的视图，对视图进行查询和取消视图。

## 实验内容

1. 定义常见的视图形式，包括：

- 行列子集视图。
- WITH CHECK OPTION的视图。
- 基于多个基表的视图。
- 基于视图的视图。
- 带表达式的视图。
- 分组视图。

2. 通过实验考察WITH CHECK OPTION这一语句在视图定义后产生的影响，包括对修改操作、删除操作、插入操作的影响。
3. 讨论视图的数据更新情况，对子行列视图进行数据更新。
4. 使用DROP语句删除一个视图，由该视图导出的其他视图定义仍在数据字典中，但已不能使用，必须显式删除。同样的原因，删除基表时，由该基表导出的所有视图定义都必须显式删除。

## 课内实验

要求：

以school数据库为例(与前两次实验的数据同)，在该数据库中存在4张表格，分别为：

    STUDENTS(sid,sname,email,grade)

    TEACHERS(tid,tname,email,salary)

    COURSES(cid,cname,hour)

    CHOICES(no,sid,tid,cid,score)

1. 创建一个行列子集视图，给出选课成绩合格的学生的编号，所选课程号和该课程成绩
2. 创建基于多个基表的视图，这个视图由学生姓名和其所选修的课程名及讲授该课程的教师姓名构成
3. 创建带表达式的视图，由学生姓名、所选课程名和所有课程成绩都比原来多5分这几个属性组成
4. 创建分组视图，将学生的学号及其平均成绩定义为一个视图
5. 创建一个基于视图的视图，基于(1)中建立的视图，定义一个包括学生编号、学生所选课程数目和平均成绩的视图
6. 查询所有选修课程Software Engineering的学生姓名
7. 插入元组(600000000, 823069829, 10010, 59)到视图CS中。若是在视图的定义中存在WITH CHECK OPTION子句对插入操作有什么影响？
8. 将视图CS（包含定义WITH CEHCK OPTION）中，所有课程编号为10010的课程的成绩都减去5分。这个操作数据库是否会正确执行，为什么？如果加上5分（原来的95分以上的不变）呢？
9. 在视图CS（包含定义WITH CHECK OPTION）删除编号为804529880学生的记录，会产生什么结果？
10. 取消视图SCT和视图CS


## 自我实践

1. 定义选课信息和课程名称的视图VIEWC
2. 定义学生姓名与选课信息的视图VIEWS
3. 定义年级低于1998的学生的视图S1(SID,SNAME,GRADE)
4. 